    {% load static %}

    <div class="bg-white bg-card w-100 h-100 text-center py-5 position-relative">
        {% include 'partials/month-habits.html' %}
    </div>

    {% include 'partials/edit-habits-modal.html' %}
    {% include 'partials/new-habit-modal.html' %}
    {% include 'partials/track-old-habits-modal.html' %}
    {% include 'partials/untrack-habits-modal.html' %}

    <script>
      document.querySelectorAll('.habit-cell').forEach(cell => {
        cell.addEventListener('click', async () => {
          const habitId = cell.dataset.habit;
          const dateStr = cell.dataset.date; // YYYY-MM-DD string
          const [year, month, day] = dateStr.split('-');

          const response = await fetch(`/toggle-habit/${habitId}/${year}/${month}/${day}/`, {
            method: 'POST',
            headers: {
              'X-CSRFToken': '{{ csrf_token }}',
            },
          });

          if (response.ok) {
            const result = await response.json();
            if (result.status === 'created') {
              cell.classList.remove('bg-light');
              cell.classList.add('bg-theme', 'text-white');
            } else if (result.status === 'deleted') {
              cell.classList.remove('bg-theme', 'text-white');
              cell.classList.add('bg-light');
            }
          }
        });
      });
    </script>
